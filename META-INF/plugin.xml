<idea-plugin version="2">
    <id>ool.idea.plugin</id>
    <name>Oxy template support</name>
    <version>0.9.5</version>
    <vendor email="p.mayr@oxyonline.cz" url="http://stash.oxyonline.local/projects/CZC/repos/macro-support-plugin">
        oXy Online s.r.o.
    </vendor>

    <depends>com.intellij.modules.ultimate</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>JavaScript</depends>

    <description><![CDATA[
      Podpora šablonovacího systému oxy.
    ]]></description>

    <change-notes><![CDATA[
        <b>0.9.5</b>
        <ul>
            <li>
                prokliky a našeptávání dwr metod v javascriptu
            </li>
            <li>
                direktiva suppress-optimizer
            </li>
        </ul>
        <b>0.9.4</b>
        <ul>
            <li>
                indexování TODO v nových commentech
            </li>
        </ul>
        <b>0.9.2</b>
        <ul>
            <li>
                kompatibilita s 14.1
            </li>
        </ul>
        <b>0.9.1</b>
        <ul>
            <li>
                kontrola přebytečných direktiv
            </li>
        </ul>
        <b>0.9</b>
        <ul>
            <li>
                formátovač
            </li>
        </ul>
        <b>0.8.3</b>
        <ul>
            <li>
                sjednocení gramatiky pluginu a webu
            </li>
        </ul>
        <b>0.8.2</b>
        <ul>
            <li>
                zobrazení zkompilovaného kódu
            </li>
        </ul>
        <b>0.8.1</b>
        <ul>
            <li>
                include optimizer
            </li>
        </ul>
        <b>0.8</b>
        <ul>
            <li>
                goto symbol - vyhledání makra podle fully qualified name
            </li>
            <li>
                structure view
            </li>
        </ul>
        <b>0.7.1</b>
        <ul>
            <li>
                bugfixy našeptávače
            </li>
            <li>
                standartní xml komentáře
            </li>
            <li>
                find usages, refactoring globálních proměnných
            </li>
        </ul>
        <b>0.7</b>
        <ul>
            <li>
                automatické doplňování include direktiv
            </li>
            <li>
                kontrola chybějících include direktiv
            </li>
        </ul>
        <b>0.6.2</b>
        <ul>
            <li>
                dokumentace maker v našeptávači
            </li>
        </ul>
        <b>0.6.1</b>
        <ul>
            <li>
                java makra - find usages
            </li>
        </ul>
        <b>0.6</b>
        <ul>
            <li>
                find usages / refactoring js maker, proklikávatelný namespace
            </li>
            <li>
                reference na js makra ve volání přes partialPageUpdater
            </li>
        </ul>
        <b>0.5</b>
        <ul>
            <li>
                mašeptávání a prokliky js maker, mašeptávání parametrů js maker v xml
            </li>
        </ul>
        <b>0.4.3</b>
        <ul>
            <li>
                mašeptávání a prokliky java maker, mašeptávání parametrů java maker v xml
            </li>
            <li>
                našeptávání a prokliky globálních proměnných js
            </li>
        </ul>
        <b>0.4.2</b>
        <ul>
            <li>
                našeptávání předdefinovaných objektů a funkcí šablonovacího systému (oxy, out...)
            </li>
            <li>
                vypnutí kontroly 'Expression statement which is not assignment or call' v js
            </li>
        </ul>
        <b>0.4.1</b>
        <ul>
            <li>
                fix řádkového komentáře v js
            </li>
        </ul>
        <b>0.4</b>
        <ul>
            <li>
                provizorní formátovač
            </li>
            <li>
                možnost sbalení obsahu makra / js bloku
            </li>
            <li>
                kontrola, zda sedí jméno otvíracího a koncového tagu
            </li>
            <li>
                fix našeptávání koncového tagu
            </li>
        </ul>
        <b>0.3.1</b>
        <ul>
            <li>
                vyznačování odpovídajících tagů a uvozovek
            </li>
            <li>
                bugfixy v doplňování tagů a uvozovek
            </li>
        </ul>
        <b>0.3</b>
        <ul>
            <li>
                napovídání souboru v parametru direktivy, automatická úprava referencí při přesunu souboru, vyznačování neplatných referencí
            </li>
        </ul>
        <b>0.2.1</b>
        <ul>
            <li>
                commenter - možnost zakonentování vyznačeného bloku
            </li>
        </ul>
        <b>0.2</b>
        <ul>
            <li>
                tagy maker - doplňování konců nepárových a koncových tagů párových
            </li>
            <li>
                doplňování uvozovek u parametru maker a direktiv
            </li>
            <li>
                našeptávání 'expr: ' v parametru makra
            </li>
        </ul>
        <b>0.1.1</b>
        <ul>
            <li>
                dploňování a zvýrazňování odpovídající značky hranice bloku
            </li>
            <li>
                našeptávání direktiv
            </li>
            <li>
                'expr:' parametr se zahrnuje do javascriptového bloku
            </li>
        </ul>
        <b>0.1</b> - první stabilní verze
        <ul>
            <li>
                rozlišení js / html bloku, direktiv a maker
            </li>
            <li>
                stránka s nastavením barev
            </li>
            <li>
                samostatné syntaktické stromy pro jednotlivé jazyky, zvyrazňovač syntaxe
            </li>
        </ul>]]>
    </change-notes>

    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Build+Number+Ranges for description -->
    <idea-version since-build="141"/>

    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
         on how to target different products -->
    <!-- uncomment to enable plugin in all products
    <depends>com.intellij.modules.lang</depends>
    -->

    <extensions defaultExtensionNs="com.intellij">
        <fileTypeFactory implementation="ool.idea.plugin.file.OxyTemplateFileTypeFactory"/>
        <lang.parserDefinition language="OxyTemplate"
                               implementationClass="ool.idea.plugin.lang.parser.definition.OxyTemplateParserDefinition"/>
        <lang.parserDefinition language="OxyTemplateInnerJs"
                               implementationClass="ool.idea.plugin.lang.parser.definition.OxyTemplateInnerJsParserDefinition"/>
        <lang.parserDefinition language="CompiledPreview"
                               implementationClass="ool.idea.plugin.lang.parser.definition.CompiledPreviewParserDefinition"/>
        <lang.treePatcher language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.lang.InnerJsTreePatcher"/>
        <lang.treePatcher language="HTML" implementationClass="ool.idea.plugin.lang.XmlTreePatcher" order="first"/>
        <editorHighlighterProvider filetype="OxyTemplate"
                                   implementationClass="ool.idea.plugin.editor.highlighter.OxyTemplateHighlighterProvider"/>
        <lang.syntaxHighlighterFactory key="OxyTemplate"
                                   implementationClass="ool.idea.plugin.editor.highlighter.OxyTemplateSyntaxHighlighterFactory"/>
        <lang.syntaxHighlighterFactory key="CompiledPreview"
                                   implementationClass="ool.idea.plugin.editor.highlighter.CompiledPreviewHighlighterFactory"/>
        <lang.fileViewProviderFactory language="OxyTemplate"
                                      implementationClass="ool.idea.plugin.file.OxyTemplateFileViewProviderFactory"/>
        <braceMatcher filetype="OxyTemplate" implementationClass="ool.idea.plugin.editor.highlighter.MatchingElementHighlighter" />
        <colorSettingsPage implementation="ool.idea.plugin.editor.highlighter.OxyTemplateColorSettingsPage"/>
        <completion.contributor language="OxyTemplate" implementationClass="ool.idea.plugin.editor.completion.ExpressionStatement"/>
        <completion.contributor language="OxyTemplate" implementationClass="ool.idea.plugin.editor.completion.Directive"/>
        <completion.contributor language="OxyTemplate" implementationClass="ool.idea.plugin.editor.completion.macro.UnclosedMacroTag"/>
        <completion.contributor language="OxyTemplate" implementationClass="ool.idea.plugin.editor.completion.macro.XmlMacroParamName"/>
        <completion.contributor language="OxyTemplate" implementationClass="ool.idea.plugin.editor.completion.macro.name.XmlMacroName"/>
        <completion.contributor language="HTML" implementationClass="ool.idea.plugin.editor.completion.UnclosedTag" order="first"/>
        <completion.contributor language="HTML" implementationClass="ool.idea.plugin.editor.completion.macro.XmlMacroNamespace" order="first"/>
        <completion.contributor language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.editor.completion.macro.name.JsMacroName" order="first"/>
        <completion.contributor language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.editor.completion.JsGlobalVariable"/>
        <completion.contributor language="JavaScript" implementationClass="ool.idea.plugin.editor.completion.DwrMethod" order="first"/>
        <typedHandler implementation="ool.idea.plugin.editor.type.BlockMarkerHandler"/>
        <typedHandler implementation="ool.idea.plugin.editor.type.ParamQuoteHandler"/>
        <typedHandler implementation="ool.idea.plugin.editor.type.TagCloseHandler"/>
        <backspaceHandlerDelegate implementation="ool.idea.plugin.editor.type.BackspaceHandler"/>
        <enterHandlerDelegate implementation="ool.idea.plugin.editor.type.EnterHandler"/>
        <lang.commenter language="OxyTemplate" implementationClass="ool.idea.plugin.editor.comment.OxyTemplateCommenter"/>
        <multiLangCommenter implementation="ool.idea.plugin.editor.comment.OxyTemplateCommentProvider"/>
        <lang.formatter language="OxyTemplate" implementationClass="ool.idea.plugin.editor.format.OxyTemplateFormatter"/>
        <lang.formatter language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.editor.format.OxyTemplateInnerJsFormatter"/>
        <lang.foldingBuilder language="OxyTemplate" implementationClass="ool.idea.plugin.editor.folding.MatchingTagsAndJsBlock"/>
        <lang.elementManipulator forClass="ool.idea.plugin.psi.DirectiveParamFileReference"
                                 implementationClass="ool.idea.plugin.psi.manipulator.DirectiveParamFileReferenceManipulator"/>
        <lang.elementManipulator forClass="ool.idea.plugin.psi.MacroName"
                                 implementationClass="ool.idea.plugin.psi.manipulator.MacroNameManipulator"/>
        <annotator language="OxyTemplate" implementationClass="ool.idea.plugin.editor.annotator.XmlMacroNameAnnotator"/>
        <annotator language="OxyTemplate" implementationClass="ool.idea.plugin.editor.annotator.EncodedEntityAnnotator"/>
        <annotator language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.editor.annotator.InnerJsAnnotator"/>
        <localInspection language="OxyTemplate" shortName="UnresolvedInclude" bundle="I18n.messages" key="inspection.unresolved.include.tooltip"
                         groupName="Oxy template" enabledByDefault="true" level="WARNING"
                         implementationClass="ool.idea.plugin.editor.inspection.UnresolvedIncludeInspection"/>
        <localInspection language="OxyTemplate" shortName="MissingInclude" groupName="Oxy template"  bundle="I18n.messages" key="inspection.missing.include.tooltip"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="ool.idea.plugin.editor.inspection.MissingIncludeInspection"/>
        <localInspection language="OxyTemplate" shortName="RedundantInclude" groupName="Oxy template"  bundle="I18n.messages" key="inspection.redundant.include.tooltip"
                         enabledByDefault="true" level="WARNING"
                         implementationClass="ool.idea.plugin.editor.inspection.RedundantIncludeInspection"/>
        <fileBasedIndex implementation="ool.idea.plugin.file.index.globals.JsGlobalsIndex"/>
        <fileBasedIndex implementation="ool.idea.plugin.file.index.nacros.js.JsMacroNameIndex"/>
        <lang.findUsagesProvider language="OxyTemplate" implementationClass="ool.idea.plugin.editor.usages.OxyTemplateFindUsagesProvider"/>
        <psi.referenceContributor implementation="ool.idea.plugin.psi.reference.java.LiteralJsMacroReferenceContributor" order="first"/>
        <psi.referenceContributor implementation="ool.idea.plugin.psi.reference.java.GlobalVariableDefinitionReferenceContributor" order="first"/>
        <referencesSearch implementation="ool.idea.plugin.editor.usages.OxyTemplateReferenceSearch"/>
        <!--<documentationProvider implementation="ool.idea.plugin.editor.documentation.MacroParamDocumentationProvider"/>-->
        <gotoSymbolContributor implementation="ool.idea.plugin.editor.gotosymbol.MacroGotoSymbolContributor"/>
        <lang.psiStructureViewFactory language="OxyTemplate" implementationClass="ool.idea.plugin.editor.structure.OxyTemplateStructureViewFactory"/>
        <lang.importOptimizer language="OxyTemplate" implementationClass="ool.idea.plugin.action.IncludeOptimizer"/>
        <highlightErrorFilter implementation="ool.idea.plugin.lang.parser.ErrorFilter"/>
    </extensions>
    <extensions defaultExtensionNs="JavaScript">
        <predefinedLibraryProvider implementation="ool.idea.plugin.editor.InnerJsPredefinedLibrary"/>
        <intentionAndInspectionFilter language="OxyTemplate" implementationClass="ool.idea.plugin.editor.inspection.filter.JsIntentionAndInspectionFilter"/>
        <dialectSpecificHandlersFactory language="JavaScript" implementationClass="ool.idea.plugin.file.JsSpecificHandlersFactory" order="first"/>
        <dialectSpecificHandlersFactory language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.file.OxyTemplateJsSpecificHandlersFactory"/>
        <dialectSpecificHandlersFactory language="CompiledPreview" implementationClass="ool.idea.plugin.file.OxyTemplateJsSpecificHandlersFactory"/>
        <elementScopeProvider language="OxyTemplateInnerJs" implementationClass="ool.idea.plugin.psi.reference.innerjs.InnerJsResolveScopeProvider"/>
        <elementScopeProvider language="CompiledPreview" implementationClass="ool.idea.plugin.psi.reference.innerjs.CompiledPreviewResolveScopeProvider"/>
    </extensions>

    <application-components>
        <!-- Add your application components here -->
    </application-components>

    <project-components>
        <component>
            <implementation-class>ool.idea.plugin.action.compile.CompiledPreviewController</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="oxy.compiledCode" class="ool.idea.plugin.action.compile.CompiledPreviewAction" text="Compiled Code"
                icon="/icons/default.png">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="alt C"/>
        </action>
    </actions>
</idea-plugin>
